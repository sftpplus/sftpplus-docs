## More info about the config file at
# https://docs.netlify.com/configure-builds/file-based-configuration
#
[build]
  # Directory to change to before starting a build.
  # If not set, defaults to the root directory.
  base = ""

  # Directory that contains the deploy-ready HTML files and assets generated by
  # the build. This is relative to the base directory if one has been set, or the
  # root directory if a base has not been set. This sample publishes the
  # directory located at the absolute path "root/project/build-output"
  publish = "deploy/"

  # Default build command.
  # See the available default environment variables
  # https://docs.netlify.com/configure-builds/environment-variables/#netlify-configuration-variables
  # Netlify will auto install the deps.
  # https://docs.netlify.com/configure-builds/manage-dependencies/#python
  # https://github.com/netlify/build-image/blob/focal/included_software.md
  command = 'bash netlify_build.sh'

[build.processing.html]
  # The automatic redirection from /path/folder-> /path/folder/ is disabled
  # as it break the proxy for the documentation.
  pretty_urls = true


[build.environment]
  GIT_LFS_ENABLED = "true"
  SFTPPLUS_TARGET = "production"
  PYTHON_VERSION = "3.12"
  DOCS_ROBOT = "noindex,nofollow"

[context.production.environment]
  DOCS_ROBOT = "all"

[context.deploy-preview.environment]
  SFTPPLUS_TARGET = "dev"

# Generic rules for any branch.
[context.branch-deploy.environment]
  SFTPPLUS_TARGET = "production"


# Rules for staging branch.
[context.staging.environment]
  SFTPPLUS_TARGET = "production"


[[redirects]]
  from = "/documentation/sftpplus/versions.js"
  to = "https://www.sftpplus.com/documentation/sftpplus/versions.js"
  status = 200
  force = true

[[redirects]]
  from = "/static/*"
  to = "https://www.sftpplus.com/static/:splat"
  status = 301
  force = true

[[redirects]]
  from = "/product/*"
  to = "https://www.sftpplus.com/product/:splat"
  status = 301

[[redirects]]
  from = "/pricing/*"
  to = "https://www.sftpplus.com/pricing/:splat"
  status = 301

[[redirects]]
  from = "/support/*"
  to = "https://www.sftpplus.com/support/:splat"
  status = 301

[[redirects]]
  from = "/articles/*"
  to = "https://www.sftpplus.com/articles/:splat"
  status = 301

[[redirects]]
  from = "/about/*"
  to = "https://www.sftpplus.com/about/:splat"
  status = 301

[[redirects]]
  from = "/resources/*"
  to = "https://www.sftpplus.com/resources/:splat"
  status = 301
